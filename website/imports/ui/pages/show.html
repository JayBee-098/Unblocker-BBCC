<template name="pages_show">
  <div class="container">

    <div class="card-panel">
      <!--TODO: Make this display better-->
      <h2 class="card-title">Information:</h2>
      <ul class="collection">
        <li class="collection-item">
          <p>Name:</p>
          <p>{{show.name}}</p>
        </li>
        <li class="collection-item">
          <p>Alternative Names:</p>
          <p>
            <ul>
              {{#each show.altNames}}
                <li>{{this}}</li>
              {{/each}}
            </ul>
          </p>
        </li>
        <li class="collection-item">
          <p>Description:</p>
          <p>{{{show.description}}}</p>
        </li>
        <li class="collection-item">
          <p>MAL ID:</p>
          <p>{{show.malId}}</p>
        </li>
        <li class="collection-item">
          <p>Type:</p>
          <p>{{show.type}}</p>
        </li>
        <li class="collection-item">
          <p>Genres:</p>
          <p>
            <ul>
              {{#each show.genres}}
                <li>{{this}}</li>
              {{/each}}
            </ul>
          </p>
        </li>
        <li class="collection-item">
          <p>Airing:</p>
          <p>
            {{show.airedStart.date}}/{{show.airedStart.month}}/{{show.airedStart.year}} {{show.airedStart.hour}}:{{show.airedStart.minute}}
                                   -
            {{show.airedEnd.date}}/{{show.airedEnd.month}}/{{show.airedEnd.year}} {{show.airedEnd.hour}}:{{show.airedEnd.minute}}
          </p>
        </li>
        <li class="collection-item">
          <p>Season:</p>
          <p>{{show.season.quarter}} {{show.season.year}}</p>
        </li>
        <li class="collection-item">
          <p>Streamers:</p>
          <p>
            <ul>
              {{#each show.streamerUrls}}
                <li>
                  <a target="_blank" rel="noopener" href="{{url}}">{{streamerId}} ({{type}})</a>
                </li>
              {{/each}}
            </ul>
          </p>
        </li>
        <li class="collection-item">
          <p>Update State:</p>
          <p>
            Last Start - {{show.lastUpdateStart}}
            <br>
            Last End - {{show.lastUpdateEnd}}
          </p>
        </li>
      </ul>
    </div>

    <div class="card-panel">
      <h2 class="card-title">Thumbnails:</h2>
      {{>components_carousel images=show.getThumbnailUrls}}
    </div>

    {{#if episodes 'sub'}}
      <div class="card-panel">
        <h2 class="card-title">Subbed:</h2>
        {{> pages_show_episodes episodes 'sub'}}
      </div>
    {{/if}}

    {{#if episodes 'dub'}}
      <div class="card-panel">
        <h2 class="card-title">Dubbed:</h2>
        {{> pages_show_episodes episodes 'dub'}}
      </div>
    {{/if}}

    {{#if episodes 'raw'}}
      <div class="card-panel">
        <h2 class="card-title">Raw:</h2>
        {{> pages_show_episodes episodes 'raw'}}
      </div>
    {{/if}}

  </div>
  {{> components_loading_indicator_background state=updating}}
</template>

<template name="pages_show_episodes">
  <div class="collection">
    {{#each this}}
      <a href="{{#if $eq episodeNumStart episodeNumEnd}}
        {{pathFor 'episodeSingle' showId=showId translationType=translationType episodeNumBoth=episodeNumStart}}
      {{else}}
        {{pathFor 'episodeDouble' showId=showId translationType=translationType episodeNumStart=episodeNumStart episodeNumEnd=episodeNumEnd}}
      {{/if}}" class="collection-item">
        <div class="row">
          <div class="col s6">
            Episode {{episodeNumStart}}{{#if $neq episodeNumStart episodeNumEnd}} - {{episodeNumEnd}}{{/if}}
          </div>
          <div class="col s6">
            <ul class="right episode-streamer-list">
              {{#each streamers}}
                <li>{{name}}</li>
              {{/each}}
            </ul>
          </div>
        </div>
      </a>
    {{/each}}
  </div>
</template>
